-- Crear tabla Persona
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'PERSONA')
BEGIN
    CREATE TABLE PERSONA (
        ID INT IDENTITY(1,1) PRIMARY KEY,
        NOMBRE NVARCHAR(255) NOT NULL,
        APELLIDO_PATERNO NVARCHAR(255) NOT NULL,
        APELLIDO_MATERNO NVARCHAR(255) NOT NULL,
        ID_DEPARTAMENTO INT NULL,
		ID_JERARQUIA INT NULL,
		ID_TITULO INT NULL,
		ANTIGUEDAD NUMERIC INT NULL,
		ACTIVO BIT NOT NULL DEFAULT 1;
		FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES DEPARTAMENTO(ID) ON DELETE SET NULL,
        FOREIGN KEY (ID_JERARQUIA) REFERENCES JERARQUIA(ID) ON DELETE SET NULL,
		FOREIGN KEY (ID_TITULO) REFERENCES TITULO(ID) ON DELETE SET NULL
    );
    CREATE INDEX idx_ID_DEPARTAMENTO ON PERSONA (ID_DEPARTAMENTO);
	CREATE INDEX idx_ID_JERARQUIA ON PERSONA (ID_JERARQUIA);
END
GO